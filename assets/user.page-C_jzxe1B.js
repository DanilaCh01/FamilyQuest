import{j as e,L as x,a as r,r as i,u as b,b as d,d as o}from"./index-DSzY9glm.js";const u=({childrenList:s})=>e.jsxs("div",{className:"mt-6 w-full",children:[e.jsx("h3",{className:"text-xl font-bold mb-3 text-blue-700",children:"Панель батьків"}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Ваші діти:"}),s?.length>0?e.jsx("ul",{className:"list-disc pl-5 text-blue-900",children:s?.map(t=>e.jsx("li",{children:t.name||t.email},t.email))}):e.jsx("p",{className:"text-gray-500 italic",children:"Ви ще не додали дітей."}),e.jsx(x,{to:r.addChild,className:"mt-4 inline-block bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",children:"+ Додати дитину"})]}),e.jsx("div",{className:"mt-6 pt-6",children:e.jsx(x,{to:r.familyControl,className:"block text-center bg-blue-700 text-white px-6 py-3 rounded-xl font-bold hover:bg-blue-800 transition shadow-md",children:"Керування сім'єю"})})]}),p=({balance:s,goals:t})=>e.jsxs("div",{className:"mt-6 w-full space-y-6",children:[e.jsxs("div",{className:"p-6 bg-green-50 rounded-2xl border border-green-100 text-center",children:[e.jsx("p",{className:"text-sm text-green-700 font-medium uppercase tracking-wider",children:"Мій баланс"}),e.jsxs("h3",{className:"text-4xl font-black text-green-600 mt-2",children:[s||0," ★"]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"Мої цілі"}),e.jsx("ul",{className:"space-y-3",children:t?.map(l=>e.jsxs("li",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:l.title}),e.jsxs("span",{className:"text-blue-600 font-bold",children:[l.points," ★"]})]},l.id))})]})]}),f=()=>{const[s,t]=i.useState(null),[l,c]=i.useState(""),n=b();return i.useEffect(()=>{(async()=>{try{const a=await d("/users");if(a.role==="child"){const[m,h]=await Promise.all([d("/family/points/me"),d("/family/goals")]);t({...a,balance:m.balance,goals:h})}else t(a)}catch(a){a.status===401?(c("Помилка авторизації."),o(),n(`/auth/${r.signIn}`)):a.status===403?(o(),n(`/auth/${r.signIn}`)):a.status===404?c("Користувач не знайдений."):c("Щось пішло не так...")}})()},[n]),l?e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen",children:[e.jsx("div",{className:"text-red-500 text-lg mb-4",children:l}),e.jsx("button",{onClick:()=>n(`/auth/${r.signIn}`),className:"text-blue-600 underline",children:"Повернутися до входу"})]}):e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 text-gray-800 p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-2xl shadow-xl border border-gray-200",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-center text-gray-900",children:"Мій Профіль"}),s?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"pb-4 border-b border-gray-100",children:[e.jsxs("p",{className:"text-lg text-black font-medium",children:["Email: ",e.jsx("span",{className:"text-blue-600",children:s.email})]}),e.jsxs("p",{className:"text-sm text-black font-bold",children:["Роль: ",e.jsx("span",{className:"text-blue-600",children:s.role})]})]}),s.role==="parent"?e.jsx(u,{childrenList:s.children}):e.jsx(p,{balance:s.balance,goals:s.goals})]}):e.jsx("p",{className:"text-center animate-pulse text-gray-400",children:"Завантаження профілю..."})]})})};export{f as UserPage};
